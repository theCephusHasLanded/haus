{"ast":null,"code":"'use client';\n\"use strict\";\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all) __defProp(target, name, {\n    get: all[name],\n    enumerable: true\n  });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n  return to;\n};\nvar __toCommonJS = mod => __copyProps(__defProp({}, \"__esModule\", {\n  value: true\n}), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  useUpdateEffect: () => useUpdateEffect\n});\nmodule.exports = __toCommonJS(src_exports);\nvar import_react = require(\"react\");\nfunction useUpdateEffect(callback, deps) {\n  const renderCycleRef = (0, import_react.useRef)(false);\n  const effectCycleRef = (0, import_react.useRef)(false);\n  (0, import_react.useEffect)(() => {\n    const mounted = renderCycleRef.current;\n    const run = mounted && effectCycleRef.current;\n    if (run) {\n      return callback();\n    }\n    effectCycleRef.current = true;\n  }, deps);\n  (0, import_react.useEffect)(() => {\n    renderCycleRef.current = true;\n    return () => {\n      renderCycleRef.current = false;\n    };\n  }, []);\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  useUpdateEffect\n});","map":{"version":3,"names":["src_exports","__export","useUpdateEffect","module","exports","__toCommonJS","import_react","require","callback","deps","renderCycleRef","useRef","effectCycleRef","useEffect","mounted","current","run"],"sources":["../src/index.ts"],"sourcesContent":["import { useEffect, useRef } from \"react\"\n\nexport function useUpdateEffect(\n  callback: React.EffectCallback,\n  deps: React.DependencyList,\n) {\n  const renderCycleRef = useRef(false)\n  const effectCycleRef = useRef(false)\n\n  useEffect(() => {\n    const mounted = renderCycleRef.current\n    const run = mounted && effectCycleRef.current\n    if (run) {\n      return callback()\n    }\n    effectCycleRef.current = true\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps)\n\n  useEffect(() => {\n    renderCycleRef.current = true\n    return () => {\n      renderCycleRef.current = false\n    }\n  }, [])\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,WAAA;AAAAC,QAAA,CAAAD,WAAA;EAAAE,eAAA,EAAAA,CAAA,KAAAA;AAAA;AAAAC,MAAA,CAAAC,OAAA,GAAAC,YAAA,CAAAL,WAAA;AAAA,IAAAM,YAAA,GAAkCC,OAAA;AAE3B,SAASL,gBACdM,QAAA,EACAC,IAAA,EACA;EACA,MAAMC,cAAA,OAAiBJ,YAAA,CAAAK,MAAA,EAAO,KAAK;EACnC,MAAMC,cAAA,OAAiBN,YAAA,CAAAK,MAAA,EAAO,KAAK;EAEnC,IAAAL,YAAA,CAAAO,SAAA,EAAU,MAAM;IACd,MAAMC,OAAA,GAAUJ,cAAA,CAAeK,OAAA;IAC/B,MAAMC,GAAA,GAAMF,OAAA,IAAWF,cAAA,CAAeG,OAAA;IACtC,IAAIC,GAAA,EAAK;MACP,OAAOR,QAAA,CAAS;IAClB;IACAI,cAAA,CAAeG,OAAA,GAAU;EAE3B,GAAGN,IAAI;EAEP,IAAAH,YAAA,CAAAO,SAAA,EAAU,MAAM;IACdH,cAAA,CAAeK,OAAA,GAAU;IACzB,OAAO,MAAM;MACXL,cAAA,CAAeK,OAAA,GAAU;IAC3B;EACF,GAAG,EAAE;AACP","ignoreList":[]},"metadata":{},"sourceType":"script"}