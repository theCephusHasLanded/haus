{"ast":null,"code":"'use client';\n\"use strict\";\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all) __defProp(target, name, {\n    get: all[name],\n    enumerable: true\n  });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n  return to;\n};\nvar __toCommonJS = mod => __copyProps(__defProp({}, \"__esModule\", {\n  value: true\n}), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  Portal: () => Portal,\n  PortalManager: () => PortalManager,\n  usePortalManager: () => usePortalManager\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/portal-manager.tsx\nvar import_react_context = require(\"@chakra-ui/react-context\");\nvar import_jsx_runtime = require(\"react/jsx-runtime\");\nvar [PortalManagerContextProvider, usePortalManager] = (0, import_react_context.createContext)({\n  strict: false,\n  name: \"PortalManagerContext\"\n});\nfunction PortalManager(props) {\n  const {\n    children,\n    zIndex\n  } = props;\n  return /* @__PURE__ */(0, import_jsx_runtime.jsx)(PortalManagerContextProvider, {\n    value: {\n      zIndex\n    },\n    children\n  });\n}\nPortalManager.displayName = \"PortalManager\";\n\n// src/portal.tsx\nvar import_react_use_safe_layout_effect = require(\"@chakra-ui/react-use-safe-layout-effect\");\nvar import_react_context2 = require(\"@chakra-ui/react-context\");\nvar import_react_dom = require(\"react-dom\");\nvar import_react = require(\"react\");\nvar import_jsx_runtime2 = require(\"react/jsx-runtime\");\nvar [PortalContextProvider, usePortalContext] = (0, import_react_context2.createContext)({\n  strict: false,\n  name: \"PortalContext\"\n});\nvar PORTAL_CLASSNAME = \"chakra-portal\";\nvar PORTAL_SELECTOR = `.chakra-portal`;\nvar Container = props => /* @__PURE__ */(0, import_jsx_runtime2.jsx)(\"div\", {\n  className: \"chakra-portal-zIndex\",\n  style: {\n    position: \"absolute\",\n    zIndex: props.zIndex,\n    top: 0,\n    left: 0,\n    right: 0\n    // NB: Don't add `bottom: 0`, it makes the entire app unusable\n    // @see https://github.com/chakra-ui/chakra-ui/issues/3201\n  },\n  children: props.children\n});\nvar DefaultPortal = props => {\n  const {\n    appendToParentPortal,\n    children\n  } = props;\n  const [tempNode, setTempNode] = (0, import_react.useState)(null);\n  const portal = (0, import_react.useRef)(null);\n  const [, forceUpdate] = (0, import_react.useState)({});\n  (0, import_react.useEffect)(() => forceUpdate({}), []);\n  const parentPortal = usePortalContext();\n  const manager = usePortalManager();\n  (0, import_react_use_safe_layout_effect.useSafeLayoutEffect)(() => {\n    if (!tempNode) return;\n    const doc = tempNode.ownerDocument;\n    const host = appendToParentPortal ? parentPortal != null ? parentPortal : doc.body : doc.body;\n    if (!host) return;\n    portal.current = doc.createElement(\"div\");\n    portal.current.className = PORTAL_CLASSNAME;\n    host.appendChild(portal.current);\n    forceUpdate({});\n    const portalNode = portal.current;\n    return () => {\n      if (host.contains(portalNode)) {\n        host.removeChild(portalNode);\n      }\n    };\n  }, [tempNode]);\n  const _children = (manager == null ? void 0 : manager.zIndex) ? /* @__PURE__ */(0, import_jsx_runtime2.jsx)(Container, {\n    zIndex: manager == null ? void 0 : manager.zIndex,\n    children\n  }) : children;\n  return portal.current ? (0, import_react_dom.createPortal)( /* @__PURE__ */(0, import_jsx_runtime2.jsx)(PortalContextProvider, {\n    value: portal.current,\n    children: _children\n  }), portal.current) : /* @__PURE__ */(0, import_jsx_runtime2.jsx)(\"span\", {\n    ref: el => {\n      if (el) setTempNode(el);\n    }\n  });\n};\nvar ContainerPortal = props => {\n  const {\n    children,\n    containerRef,\n    appendToParentPortal\n  } = props;\n  const containerEl = containerRef.current;\n  const host = containerEl != null ? containerEl : typeof window !== \"undefined\" ? document.body : void 0;\n  const portal = (0, import_react.useMemo)(() => {\n    const node = containerEl == null ? void 0 : containerEl.ownerDocument.createElement(\"div\");\n    if (node) node.className = PORTAL_CLASSNAME;\n    return node;\n  }, [containerEl]);\n  const [, forceUpdate] = (0, import_react.useState)({});\n  (0, import_react_use_safe_layout_effect.useSafeLayoutEffect)(() => forceUpdate({}), []);\n  (0, import_react_use_safe_layout_effect.useSafeLayoutEffect)(() => {\n    if (!portal || !host) return;\n    host.appendChild(portal);\n    return () => {\n      host.removeChild(portal);\n    };\n  }, [portal, host]);\n  if (host && portal) {\n    return (0, import_react_dom.createPortal)( /* @__PURE__ */(0, import_jsx_runtime2.jsx)(PortalContextProvider, {\n      value: appendToParentPortal ? portal : null,\n      children\n    }), portal);\n  }\n  return null;\n};\nfunction Portal(props) {\n  const portalProps = {\n    appendToParentPortal: true,\n    ...props\n  };\n  const {\n    containerRef,\n    ...rest\n  } = portalProps;\n  return containerRef ? /* @__PURE__ */(0, import_jsx_runtime2.jsx)(ContainerPortal, {\n    containerRef,\n    ...rest\n  }) : /* @__PURE__ */(0, import_jsx_runtime2.jsx)(DefaultPortal, {\n    ...rest\n  });\n}\nPortal.className = PORTAL_CLASSNAME;\nPortal.selector = PORTAL_SELECTOR;\nPortal.displayName = \"Portal\";\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  Portal,\n  PortalManager,\n  usePortalManager\n});","map":{"version":3,"names":["src_exports","__export","Portal","PortalManager","usePortalManager","module","exports","__toCommonJS","import_react_context","require","import_jsx_runtime","PortalManagerContextProvider","createContext","strict","name","props","children","zIndex","jsx","value","displayName","import_react_use_safe_layout_effect","import_react_context2","import_react_dom","import_react","import_jsx_runtime2","PortalContextProvider","usePortalContext","PORTAL_CLASSNAME","PORTAL_SELECTOR","Container","className","style","position","top","left","right","DefaultPortal","appendToParentPortal","tempNode","setTempNode","useState","portal","useRef","forceUpdate","useEffect","parentPortal","manager","useSafeLayoutEffect","doc","ownerDocument","host","body","current","createElement","appendChild","portalNode","contains","removeChild","_children","createPortal","ref","el","ContainerPortal","containerRef","containerEl","window","document","useMemo","node","portalProps","rest","selector"],"sources":["../src/index.ts","../src/portal-manager.tsx","../src/portal.tsx"],"sourcesContent":["export { PortalManager, usePortalManager } from \"./portal-manager\"\nexport type { PortalManagerProps } from \"./portal-manager\"\nexport { Portal } from \"./portal\"\nexport type { PortalProps } from \"./portal\"\n","import { createContext } from \"@chakra-ui/react-context\"\n\ninterface PortalManagerContext {\n  zIndex?: number\n}\n\nconst [PortalManagerContextProvider, usePortalManager] =\n  createContext<PortalManagerContext | null>({\n    strict: false,\n    name: \"PortalManagerContext\",\n  })\n\nexport { usePortalManager }\n\nexport interface PortalManagerProps {\n  children?: React.ReactNode\n  /**\n   * [Z-Index war] If your has multiple elements\n   * with z-index clashing, you might need to apply a z-index to the Portal manager\n   */\n  zIndex?: number\n}\n\nexport function PortalManager(props: PortalManagerProps) {\n  const { children, zIndex } = props\n  return (\n    <PortalManagerContextProvider value={{ zIndex }}>\n      {children}\n    </PortalManagerContextProvider>\n  )\n}\n\nPortalManager.displayName = \"PortalManager\"\n","import { useSafeLayoutEffect } from \"@chakra-ui/react-use-safe-layout-effect\"\nimport { createContext } from \"@chakra-ui/react-context\"\nimport { createPortal } from \"react-dom\"\nimport { usePortalManager } from \"./portal-manager\"\nimport { useEffect, useMemo, useRef, useState } from \"react\"\n\ntype PortalContext = HTMLDivElement | null\n\nconst [PortalContextProvider, usePortalContext] = createContext<PortalContext>({\n  strict: false,\n  name: \"PortalContext\",\n})\n\nconst PORTAL_CLASSNAME = \"chakra-portal\"\nconst PORTAL_SELECTOR = `.chakra-portal`\n\nconst Container = (props: React.PropsWithChildren<{ zIndex: number }>) => (\n  <div\n    className=\"chakra-portal-zIndex\"\n    style={{\n      position: \"absolute\",\n      zIndex: props.zIndex,\n      top: 0,\n      left: 0,\n      right: 0,\n      // NB: Don't add `bottom: 0`, it makes the entire app unusable\n      // @see https://github.com/chakra-ui/chakra-ui/issues/3201\n    }}\n  >\n    {props.children}\n  </div>\n)\n\n/**\n * Portal that uses `document.body` as container\n */\nconst DefaultPortal = (\n  props: React.PropsWithChildren<{ appendToParentPortal?: boolean }>,\n) => {\n  const { appendToParentPortal, children } = props\n\n  const [tempNode, setTempNode] = useState<HTMLElement | null>(null)\n  const portal = useRef<HTMLDivElement | null>(null)\n\n  const [, forceUpdate] = useState({})\n  useEffect(() => forceUpdate({}), [])\n\n  const parentPortal = usePortalContext()\n  const manager = usePortalManager()\n\n  useSafeLayoutEffect(() => {\n    if (!tempNode) return\n\n    const doc = tempNode.ownerDocument\n    const host = appendToParentPortal ? parentPortal ?? doc.body : doc.body\n\n    if (!host) return\n\n    portal.current = doc.createElement(\"div\")\n    portal.current.className = PORTAL_CLASSNAME\n\n    host.appendChild(portal.current)\n    forceUpdate({})\n\n    const portalNode = portal.current\n    return () => {\n      if (host.contains(portalNode)) {\n        host.removeChild(portalNode)\n      }\n    }\n  }, [tempNode])\n\n  const _children = manager?.zIndex ? (\n    <Container zIndex={manager?.zIndex}>{children}</Container>\n  ) : (\n    children\n  )\n\n  return portal.current ? (\n    createPortal(\n      <PortalContextProvider value={portal.current}>\n        {_children}\n      </PortalContextProvider>,\n      portal.current,\n    )\n  ) : (\n    <span\n      ref={(el) => {\n        if (el) setTempNode(el)\n      }}\n    />\n  )\n}\n\ninterface ContainerPortalProps extends React.PropsWithChildren<{}> {\n  containerRef: React.RefObject<HTMLElement | null>\n  /**\n   * @default false\n   */\n  appendToParentPortal?: boolean\n}\n\n/**\n * Portal that uses a custom container\n */\nconst ContainerPortal = (props: ContainerPortalProps) => {\n  const { children, containerRef, appendToParentPortal } = props\n  const containerEl = containerRef.current\n  const host =\n    containerEl ?? (typeof window !== \"undefined\" ? document.body : undefined)\n\n  const portal = useMemo(() => {\n    const node = containerEl?.ownerDocument.createElement(\"div\")\n    if (node) node.className = PORTAL_CLASSNAME\n    return node\n  }, [containerEl])\n\n  const [, forceUpdate] = useState({})\n  useSafeLayoutEffect(() => forceUpdate({}), [])\n\n  useSafeLayoutEffect(() => {\n    if (!portal || !host) return\n    host.appendChild(portal)\n    return () => {\n      host.removeChild(portal)\n    }\n  }, [portal, host])\n\n  if (host && portal) {\n    return createPortal(\n      <PortalContextProvider value={appendToParentPortal ? portal : null}>\n        {children}\n      </PortalContextProvider>,\n      portal,\n    )\n  }\n\n  return null\n}\n\nexport interface PortalProps {\n  /**\n   * The `ref` to the component where the portal will be attached to.\n   */\n  containerRef?: React.RefObject<HTMLElement | null>\n  /**\n   * The content or node you'll like to portal\n   */\n  children: React.ReactNode\n  /**\n   * If `true`, the portal will check if it is within a parent portal\n   * and append itself to the parent's portal node.\n   * This provides nesting for portals.\n   *\n   * If `false`, the portal will always append to `document.body`\n   * regardless of nesting. It is used to opt out of portal nesting.\n   *\n   * @default true\n   */\n  appendToParentPortal?: boolean\n}\n\n/**\n * Portal\n *\n * Declarative component used to render children into a DOM node\n * that exists outside the DOM hierarchy of the parent component.\n *\n * @see Docs https://chakra-ui.com/portal\n */\n\nexport function Portal(props: PortalProps) {\n  const portalProps: PortalProps = {\n    appendToParentPortal: true,\n    ...props,\n  }\n\n  const { containerRef, ...rest } = portalProps\n  return containerRef ? (\n    <ContainerPortal containerRef={containerRef} {...rest} />\n  ) : (\n    <DefaultPortal {...rest} />\n  )\n}\n\nPortal.className = PORTAL_CLASSNAME\nPortal.selector = PORTAL_SELECTOR\n\nPortal.displayName = \"Portal\"\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}